runtime: python310
instance_class: F1
# disable automatic scaling to avoid incurring costs
automatic_scaling:
  target_cpu_utilization: 0.65
  min_instances: 0
  max_instances: 1
  min_pending_latency: 30ms  # default value
  max_pending_latency: automatic
  max_concurrent_requests: 50

handlers:
- url: /(.*\.css)
  mime_type: text/css
  static_files: public/\1
  upload: public/(.*\.css)
  http_headers:
    X-Frame-Options: SAMEORIGIN
    X-Content-Type-Options: nosniff
    X-XSS-Protection: "0"
    Content-Security-Policy: "default-src 'self'; frame-src 'self' edu.chainguard.dev https://player.vimeo.com https://www.youtube.com https://www.youtube-nocookie.com https://platform.twitter.com https://syndication.twitter.com https://visualization-ui.chainguard.app https://terminal.inky.wtf; style-src 'self' 'unsafe-inline' edu.chainguard.dev https://tagmanager.google.com https://www.googletagmanager.com cdn.jsdelivr.net https://fonts.googleapis.com https://unpkg.com https://use.fontawesome.com; form-action 'self'; font-src 'self' edu.chainguard.dev https://fonts.googleapis.com https://fonts.gstatic.com https://cdn.jsdelivr.net https://use.fontawesome.com; script-src 'self' 'unsafe-inline' edu.chainguard.dev https://www.googletagmanager.com *.googleapis.com cdn.jsdelivr.net *.googletagmanager.com https://www.google-analytics.com https://snap.licdn.com https://unpkg.com; connect-src 'self' https://www.googletagmanager.com *.google-analytics.com *.googletagmanager.com https://storage.googleapis.com https://packages.wolfi.dev https://script.google.com https://script.googleusercontent.com; img-src 'self' 'unsafe-inline' https://ssl.gstatic.com edu.chainguard.dev https://storage.googleapis.com https://www.googletagmanager.com https://www.google-analytics.com data:; base-uri 'self';"

- url: /(.+)/
  static_files: public/\1/index.html
  upload: public/(.+)/index.html
  http_headers:
    X-Frame-Options: SAMEORIGIN
    X-Content-Type-Options: nosniff
    X-XSS-Protection: "0"
    Content-Security-Policy: "default-src 'self'; frame-src 'self' edu.chainguard.dev https://player.vimeo.com https://www.youtube.com https://www.youtube-nocookie.com https://platform.twitter.com https://syndication.twitter.com https://visualization-ui.chainguard.app https://terminal.inky.wtf; style-src 'self' 'unsafe-inline' edu.chainguard.dev https://tagmanager.google.com https://www.googletagmanager.com cdn.jsdelivr.net https://fonts.googleapis.com https://unpkg.com https://use.fontawesome.com; form-action 'self'; font-src 'self' edu.chainguard.dev https://fonts.googleapis.com https://fonts.gstatic.com https://cdn.jsdelivr.net https://use.fontawesome.com; script-src 'self' 'unsafe-inline' edu.chainguard.dev https://www.googletagmanager.com *.googleapis.com cdn.jsdelivr.net *.googletagmanager.com https://www.google-analytics.com https://snap.licdn.com https://unpkg.com; connect-src 'self' https://www.googletagmanager.com *.google-analytics.com *.googletagmanager.com https://storage.googleapis.com https://packages.wolfi.dev https://script.google.com https://script.googleusercontent.com; img-src 'self' 'unsafe-inline' https://ssl.gstatic.com edu.chainguard.dev https://storage.googleapis.com https://www.googletagmanager.com https://www.google-analytics.com data:; base-uri 'self';"

- url: /
  static_files: public/index.html
  upload: public/index.html
  http_headers:
    X-Frame-Options: SAMEORIGIN
    X-Content-Type-Options: nosniff
    X-XSS-Protection: "0"
    Content-Security-Policy: "default-src 'self'; frame-src 'self' edu.chainguard.dev https://player.vimeo.com https://www.youtube.com https://www.youtube-nocookie.com https://platform.twitter.com https://syndication.twitter.com https://visualization-ui.chainguard.app https://terminal.inky.wtf; style-src 'self' 'unsafe-inline' edu.chainguard.dev https://tagmanager.google.com https://www.googletagmanager.com cdn.jsdelivr.net https://fonts.googleapis.com https://unpkg.com https://use.fontawesome.com; form-action 'self'; font-src 'self' edu.chainguard.dev https://fonts.googleapis.com https://fonts.gstatic.com https://cdn.jsdelivr.net https://use.fontawesome.com; script-src 'self' 'unsafe-inline' edu.chainguard.dev https://www.googletagmanager.com *.googleapis.com cdn.jsdelivr.net *.googletagmanager.com https://www.google-analytics.com https://snap.licdn.com https://unpkg.com; connect-src 'self' https://www.googletagmanager.com *.google-analytics.com *.googletagmanager.com https://storage.googleapis.com https://packages.wolfi.dev https://script.google.com https://script.googleusercontent.com; img-src 'self' 'unsafe-inline' https://ssl.gstatic.com edu.chainguard.dev https://storage.googleapis.com https://www.googletagmanager.com https://www.google-analytics.com data:; base-uri 'self';"

- url: /([^\.]+)([^/])
  static_files: public/\1\2/index.html
  upload: public/(.+)
  http_headers:
    X-Frame-Options: SAMEORIGIN
    X-Content-Type-Options: nosniff
    X-XSS-Protection: "0"
    Content-Security-Policy: "default-src 'self'; frame-src 'self' edu.chainguard.dev https://player.vimeo.com https://www.youtube.com https://www.youtube-nocookie.com https://platform.twitter.com https://syndication.twitter.com https://visualization-ui.chainguard.app https://terminal.inky.wtf; style-src 'self' 'unsafe-inline' edu.chainguard.dev https://tagmanager.google.com https://www.googletagmanager.com cdn.jsdelivr.net https://fonts.googleapis.com https://unpkg.com https://use.fontawesome.com; form-action 'self'; font-src 'self' edu.chainguard.dev https://fonts.googleapis.com https://fonts.gstatic.com https://cdn.jsdelivr.net https://use.fontawesome.com; script-src 'self' 'unsafe-inline' edu.chainguard.dev https://www.googletagmanager.com *.googleapis.com cdn.jsdelivr.net *.googletagmanager.com https://www.google-analytics.com https://snap.licdn.com https://unpkg.com; connect-src 'self' https://www.googletagmanager.com *.google-analytics.com *.googletagmanager.com https://storage.googleapis.com https://packages.wolfi.dev https://script.google.com https://script.googleusercontent.com; img-src 'self' 'unsafe-inline' https://ssl.gstatic.com edu.chainguard.dev https://storage.googleapis.com https://www.googletagmanager.com https://www.google-analytics.com data:; base-uri 'self';"

- url: /(.+)
  static_files: public/\1
  upload: public/(.+)
  http_headers:
    X-Frame-Options: SAMEORIGIN
    X-Content-Type-Options: nosniff
    X-XSS-Protection: "0"
    Content-Security-Policy: "default-src 'self'; frame-src 'self' edu.chainguard.dev https://player.vimeo.com https://www.youtube.com https://www.youtube-nocookie.com https://platform.twitter.com https://syndication.twitter.com https://visualization-ui.chainguard.app https://terminal.inky.wtf; style-src 'self' 'unsafe-inline' edu.chainguard.dev https://tagmanager.google.com https://www.googletagmanager.com cdn.jsdelivr.net https://fonts.googleapis.com https://unpkg.com https://use.fontawesome.com; form-action 'self'; font-src 'self' edu.chainguard.dev https://fonts.googleapis.com https://fonts.gstatic.com https://cdn.jsdelivr.net https://use.fontawesome.com; script-src 'self' 'unsafe-inline' edu.chainguard.dev https://www.googletagmanager.com *.googleapis.com cdn.jsdelivr.net *.googletagmanager.com https://www.google-analytics.com https://snap.licdn.com https://unpkg.com; connect-src 'self' https://www.googletagmanager.com *.google-analytics.com *.googletagmanager.com https://storage.googleapis.com https://packages.wolfi.dev https://script.google.com https://script.googleusercontent.com; img-src 'self' 'unsafe-inline' https://ssl.gstatic.com edu.chainguard.dev https://storage.googleapis.com https://www.googletagmanager.com https://www.google-analytics.com data:; base-uri 'self';"
  
error_handlers:
  - file: default_error.html

