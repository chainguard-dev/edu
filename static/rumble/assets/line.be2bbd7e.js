import{e as dt,t as ht,j as o,Q as ut,g as ft,r as v,u as pt,l as _t,d as l,B as xt,G as yt,L as vt,T as Ct,F as bt,k as Lt,_ as St}from"./RumbleLoader.c6d6c914.js";import{e as kt,c as Ft,J as U,L as Q,C as gt,i as C,A as wt,a as Et}from"./ClipPath.d9870ced.js";function q(t,i,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-i),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function et(t,i){this._context=t,this._k=(1-i)/6}et.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:q(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,i){switch(t=+t,i=+i,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2,this._x1=t,this._y1=i;break;case 2:this._point=3;default:q(this,t,i);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=i}};const J=function t(i){function e(a){return new et(a,i)}return e.tension=function(a){return t(+a)},e}(0);const K="#EB47E4",Y="#454CE4",Tt={80:"#BFC3FD"},Mt={top:0,right:0,bottom:10,left:0},ot=new URLSearchParams(window.location.search);var $;const y=($=ot.get("left"))!=null?$:"nginx:latest";var tt;const b=(tt=ot.get("right"))!=null?tt:"cgr.dev/chainguard/nginx:latest",Rt={...dt,background:"#FFFFFF",boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.16)",borderRadius:8,padding:16,width:176,boxSizing:"border-box"},X=ht(t=>t.date);function mt(t){return o(ut,{keys:[y,b],children:i=>o(Bt,{query:i,...t})})}function Bt({width:t,height:i,margin:e=Mt,query:{data:a}}){var g,w,E,T,M,R,m,B,O,j,P,D,I,N,W,A;const f=t-((g=e==null?void 0:e.left)!=null?g:0)-((w=e==null?void 0:e.right)!=null?w:0),p=i-((E=e==null?void 0:e.top)!=null?E:0)-((T=e==null?void 0:e.bottom)!=null?T:0),[d,r]=kt(Object.values(a[y]),u=>u.date),n=Ft({domain:[new Date(d.getTime()-0*60*60*1e3),new Date(r.getTime()+0*60*60*1e3)]}),h=ft({domain:[0,Math.max(...Object.values(a[y]).map(u=>u.totalCveCount),...Object.values(a[b]).map(u=>u.totalCveCount))+1],nice:!0}),L={tension:280,friction:160,restVelocity:1,clamp:!0},[it,nt]=v.exports.useState(!1),st=U({from:{width:0},to:{width:Math.max(f+4,0)},immediate:it,onRest(){nt(!0),ct(1)},config:L}),[at,ct]=v.exports.useState(0),S=U({opacity:at,config:L}),{tooltipOpen:k,tooltipData:s,showTooltip:F}=pt();n.range([0,f]),h.range([p,0]);const c=Object.values(a[y]),_=Object.values(a[b]);v.exports.useEffect(()=>{F({tooltipData:{cursorDate:c[c.length-2].date,dataLeft:c[c.length-2],dataRight:_[c.length-2]}})},[]);const x=v.exports.useCallback(u=>{var V;if(!c||!_||!n)return;let{x:G}=_t(u)||{x:0};G-=(V=e==null?void 0:e.left)!=null?V:0;const H=n.invert(G),z=X.center(c,H),lt=X.center(_,H),rt=c[z].date;F({tooltipData:{cursorDate:rt,dataLeft:c[z],dataRight:_[lt]}})},[e,c,_]);return l("div",{style:{position:"relative"},children:[l("svg",{width:t,height:i,children:[o(Q,{id:"area-gradient",from:"#E0E1FE",fromOffset:"0%",to:"#FFFFFF",toOffset:"94%"}),o(Q,{id:"line-gradient",from:K,to:Y}),o(gt,{id:"animated_clip",children:o(C.rect,{x:"0",y:"0",...st,height:i})}),o(xt,{width:f,height:p,fill:"transparent",onTouchStart:x,onTouchMove:x,onMouseMove:x}),o("rect",{x:0,y:i-e.bottom,width:t,height:e.bottom,fill:"white"}),l(yt,{left:(M=e==null?void 0:e.left)!=null?M:0,top:(R=e==null?void 0:e.top)!=null?R:0,clipPath:"url(#animated_clip)",children:[o(Z,{values:c,color:Tt[80],fill:"url(#area-gradient)",strokeWidth:1,dateScale:n,vulnzScale:h,handleTooltip:x}),o(Z,{values:_,color:"#E4E1E6",fill:"transparent",strokeWidth:1,dateScale:n,vulnzScale:h,handleTooltip:x}),k&&s&&s.dataLeft&&s.dataRight&&l(C.g,{...S,children:[o(vt,{from:{x:n(s.dataLeft.date),y:h(s.dataLeft.totalCveCount)},to:{x:n(s.dataLeft.date)+.001,y:h((B=(m=s.dataRight)==null?void 0:m.totalCveCount)!=null?B:0)},stroke:"url(#line-gradient)",strokeWidth:1,pointerEvents:"none"}),o("circle",{cx:n(s.dataLeft.date),cy:h((j=(O=s.dataLeft)==null?void 0:O.totalCveCount)!=null?j:0),r:4,fill:K}),o("circle",{cx:n(s.dataLeft.date),cy:h((D=(P=s.dataRight)==null?void 0:P.totalCveCount)!=null?D:0),r:4,fill:Y})]})]})]}),k&&(s==null?void 0:s.dataLeft)&&(s==null?void 0:s.dataRight)&&o(C.div,{style:S,children:o(Ct,{top:h((I=s.dataLeft.totalCveCount)!=null?I:0)+((N=e==null?void 0:e.top)!=null?N:0),left:n(s.dataLeft.date),style:Rt,children:l("div",{style:{display:"flex",flexDirection:"column"},children:[o("div",{style:{fontFamily:"Helvetica Neue",fontStyle:"normal",fontWeight:500,fontSize:14,lineHeight:1.2,letterSpacing:"0.0025em",color:"#191A2B"},children:s.cursorDate.toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric"})}),l("div",{style:{marginTop:16,fontFamily:"Helvetica Neue",fontStyle:"normal",fontWeight:400,fontSize:14,lineHeight:"20px",letterSpacing:"0.0025em",color:"#191A2B"},children:[l("div",{style:{display:"flex",justifyContent:"space-between"},children:[l("span",{children:[o("svg",{width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",style:{marginRight:8},children:o("circle",{cx:"4",cy:"4",r:"4",fill:"#EA4FE2"})}),y.split("@")[0]]}),o("span",{children:(W=s.dataLeft.totalCveCount)!=null?W:0})]}),l("div",{style:{display:"flex",justifyContent:"space-between",marginTop:8},children:[l("span",{children:[o("svg",{width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",style:{marginRight:8},children:o("circle",{cx:"4",cy:"4",r:"4",fill:"#454CE4"})}),"Chainguard"]}),o("span",{children:(A=s.dataRight.totalCveCount)!=null?A:0})]})]})]})},Math.random())})]})}function Z({values:t,color:i,fill:e,strokeWidth:a,dateScale:f,vulnzScale:p,handleTooltip:d}){return l(bt,{children:[o(wt,{data:t,x:r=>{var n;return(n=f(r.date))!=null?n:0},y:r=>{var n;return(n=p(r.totalCveCount))!=null?n:0},yScale:p,strokeWidth:1,stroke:e,fill:e,curve:J,onTouchStart:d,onTouchMove:d,onMouseMove:d}),o(Et,{curve:J,data:t,stroke:i,strokeWidth:a,strokeOpacity:1,onTouchStart:d,onTouchMove:d,onMouseMove:d,x:r=>{var n;return(n=f(r.date))!=null?n:0},y:r=>{var n;return(n=p(r.totalCveCount))!=null?n:0}})]})}Lt.createRoot(document.getElementById("root")).render(o(St,{debounceTime:50,children:({width:t,height:i})=>o(mt,{width:t,height:i})}));
